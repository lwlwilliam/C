# C 控制语句：循环

对计算机科学（是研究计算机，不是用计算机做研究）而言，一门语言应该提供以下 3 种形式的程序流：

* 执行语句序列；

* 如果满足某些条件就重复执行语句序列（循环）；

* 通过测试选择执行哪一个语句序列（分支）；

## 再探 while 循环

[summing.c](summing.c)

### 程序注释

以上程序的结构。总结如下：

```
把 sum 初始化为 0
提示用户输入数据
读取用户输入的数据
当输入的数据为整数时，
	输入添加给 sum，
	提示用户进行输入，
	然后读取下一个输入
输入完成后，打印 sum 的值
```

这叫做**伪代码(pseudocode)**，是一种用简单的句子表示程序思路的方法，它与计算机语言的形式相对应。伪代码有助于设计程序的逻辑。确定程序的逻辑
无误后，再把伪代码翻译成实际的编程代码。使用伪代码的好处之一是，可以把注意力集中在程序的组织和逻辑上，不用在设计程序时还要分心如何用编程
语言来表达自己的想法。

## while 语句

### 何时终止 while 循环

[when.c](when.c)

### 语法要点

[while1.c](while1.c)

[while2.c](while2.c)

## 用关系运算符和表达式比较大小

while 循环经常依赖测试表达式作比较，这样的表达式被称为**关系表达式(relational expression)**，出现在关系表达式中间的运算符叫做**关系运算符(relational operator)**。

以下是 C 语言的所有关系运算符。

| 运算符 | 含义 |
| :-- | :-- |
| `<` | 小于 |
| `<=` | 小于或等于 |
| `==` | 等于 |
| `>=` | 大于或等于 |
| `>` | 大于 |
| `!=` | 不等于 |

关系运算符用于构造 while 语句和其他 C 语句中用到的关系表达式。这些语句都检查关系表达式为真还是为假。对 C 而言，表达式为真的值是 1，表达式为假
的值是 0。

[cmpflt.c](cmpflt.c)

### 什么是真

[t_and_f.c](t_and_f.c)

### 其他真值

[truth.c](truth.c)

通过[truth.c](truth.c)可知，一般而言，**所有的**非零值都视为真，只有 0 被视为假。

### 真值的问题

[trouble.c](trouble.c)

### 新的 _Bool 类型

[boolean.c](boolean.c)

### 优先级和关系运算符

关系运算符优先级比算术运算符（包括 + 和 -）低，比赋值运算符高。

关系运算符之间有两种不同的优先级。

* 高优先级组：<=	>=

* 低优先级组：==	!=

运算符优先级：

| 运算符（优先级从高至低） | 结合律 |
| :-- | :-- |
| `()` | 从左往右 |
| `-` `+` `++` `--` `sizeof` | 从右往左 |
| `*` `/` `%` | 从左往右 |
| `+` `-` | 从左往右 |
| `<` `>` `<=` `>=` | 从左往右 |
| `==` `!=` | 从左往右 |
| `=` | 从右往左 |

## 不确定循环和计数循环

所谓**不确定循环**，指在测试表达式为假之前，预先不知道要执行多少次循环。另外，还有一类是**计数循环(counting loop)**，这类循环在执行循环之前就
知道要重复执行多少次。

[sweetie1.c](sweetie1.c)

## for 循环

[sweetie2.c](sweetie2.c)

[for_cube.c](for_cube.c)

### 利用 for 的灵活性

除上，for 循环还有其他 9 种用法。

1. 可以使用递减运算符来递减计数器：[for_down.c](for_down.c)；

2. 可以让计数器递增 3、10 等[for_13s.c](for13s.c)；

3. 可以用字符代替数字计数[for_char.c](for_char.c)；

4. 除了测试迭代次数外，还可以测试其他条件。在[for_cube.c](for_cube.c)中，可以把：
  
  ```
  for (num = 1; num <= 6; num ++)

  替换成

  for (num = 1; num * num * num <= 216; num ++)
  ```

5. 可以让递增的量几何增长，而不是算术增长[for_geo.c](for_geo.c)；

6. 第 3 个表达式可以使用任意合法的表达式[for_wild.c](for_wild.c)；

7. 可以省略一个或多个表达式（但是不能省略分号），只要在循环中包含能结束循环的语句即可[for_none.c](for_none.c)；

8. 第 1 个表达式不一定是给变量赋初值，也可以使用 printf()[for_show.c](for_show.c)；

9. 循环体中的行为可以改变循环头中的表达式。例如：`for (n = 1; n < 10000; n = n + delta)`，可以在循环运行时改变 delta 的值；

## 其他赋值运算符：+=、-=、*=、/=、%=

## 逗号运算符

逗号运算符扩展了 for 循环的灵活性，以便在循环头中包含更多的表达式。

[postage.c](postage.c)

**逗号运算符有两个其他性质。首先，它保证了被它分隔的表达式从左往右求值（换言之，逗号是一个序列点，所以逗号左侧项的所有副作用都在程序执行逗号右侧
项之前发生）。其次，整个逗号表达式的值是右侧项的值。例如，`x = (y = 3, (z = ++y + 2) + 5);`的效果是：先把 3 赋给 y，递增 y 为 4，然后把 4 加上 
2 之和 6 赋给 z，接着加上 5，最后把 11 赋给 x。**

逗号也可用作**分隔符**，如：`char ch, date; printf("%d %d\n", chimps, chumps);`，这里的逗号都是分隔符，不是逗号运算符。

### 当 Zeno 遇上 for 循环

Zeno 是希腊哲学家，他曾提出箭永远不会达到它的目标。首先，他认为箭要达到目标距离的一半，然后再达到剩余距离的一半，然后继续到达剩余距离的一半，
这样就无穷无尽……

[zeno.c](zeno.c)

## 出口条件循环：do while

[do_while.c](do_while.c)

[entry.c](entry.c)

## 如何选择循环？

## 嵌套循环

[rows1.c](rows1.c)

### 嵌套变式

[row2.c](row2.c)

## 数组简介

**数组(array)**是按顺序储存的一系列类型相同的值。整个数组有一个数组名，通过整数下标访问数组中单独的项或**元素(element)**。如：`float = debts[20];`
声明 debts 是一个内含 20 个元素的数组，每个元素都可以储存 float 类型的值。

考虑到影响执行的速度，C 编译器不会检查数组的下标是否正确。以下代码都不正确：

```
debts[20] = 88.32;
debts[30] = 828.12;
```

编译器不会查找这样的错误。当运行时，这会导致数据被放置在已被其他数据占用的地方，可能会破坏程序的结果甚至导致程序异常中断。

字符数组不是字符串。但如果 char 类型的数组末尾包含一个表示字符串末尾的空字符`\0`，则该数组中的内容就构成了一个字符串。

### 在 for 循环中使用数组

[scores_in.c](scores.c)
