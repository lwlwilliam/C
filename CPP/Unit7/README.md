# C 控制语句：分支和跳转

## if 语句

[colddays.c](colddays.c)

if 语句被称为**分支语句(branching statement)**或**选择语句(selection statement)**，因为它相当于一个交叉点，程序要在两条分支中选择一条执行。if 
语句的通用形式如下：

```
if (expression)
	statement
```

expression 是关系表达式，statement 可以是一条简单语句或复合语句。

## if else 语句

if else 在两条语句之间作选择。if else 语句的通用形式是：

```
if (expression)
	statement
else
	statement
```

如果要在 if 和 else 之间执行多条语句，**必须用花括号把这些语句括起来成为一个块**。下面的代码结构违反了 C 语法，因为在 if 和 else 之间只允许有
一条语句（简单语句或复合语句）。

```
if (x > 0)
	printf("Incrementing x:\n");
	x ++;
else
	printf("x <= 0 \n");
```

编译器把 printf() 语句视为 if 语句的一部分，而把`x++;`看作一条单独的语句，它不是 if 语句的一部分。然后，编译器发现 else 并没有所属的 if，这是
错误的。上面的代码应该这样写：

```
if (x > 0) {
	printf("Incrementing x:\n");
	x ++;
} else {
	printf("x <= 0 \n");
}
```

### 另一个示例：介绍 getchar() 和 putchar()

[cypher1.c](cypher1.c)

### ctype.h 系列的字符函数

[cypher2.c](cypher2.c)

### 多重选择 else if

[electric.c](electric.c)

**对于编译器的限制范围，C99 标准要求编译器最少支持 127 层嵌套**。

### else 和 if 配对

如果程序中有许多 if 和 else，编译器如何知道哪个 if 对应哪个 else？例如：

```
if (number > 6)
	if (number < 12)
		printf("You're close!\n");
else
	printf("Sorry, you lose a turn!\n");
```

何时打印`Sorry, you lose a turn!`？else 与第 1 个 if 还是第 2 个 if 匹配？答案是第 2 个。**如果没有花括号，else 与离它最近的 if 匹配**。编译器
是忽略缩进的。

### 多层嵌套的 if 语句

[divisors.c](divisor.c)

## 逻辑运算符

[chcount.c](chcount.c)

逻辑运算符：

| 逻辑运算符 | 含义 |
| :-- | :-- |
| **&&** | 与 |
| **&#124;&#124;** | 或 |
| **!** | 非 |

### 备选拼写：iso646.h 头文件

C 是在美国用标准美式键盘开发的语言。但是在世界各地，并非所有的键盘都和美式键盘一样的符号。因此，C99 标准新增了可代替逻辑运算符的拼写，它们被
定义在 ios646.h 头文件中。如果在程序中包含该头文件，便可用 and 代替 &&、or 代替 ||、not 代替 !。

### 优先级

! 运算符的优先级很高，比乘法运算符还高，与递增运算符的优先级相同，只比圆括号的优先级低。&& 运算符的优先级比 || 运算符高，但是两者的优先级都比
关系运算符低，比赋值运算符高。

### 求值顺序

除了两个运算符共享一个运算对象的情况外，C 通常不保证先对复杂表达式中哪部分求值。例如，下面的语句，可能先对表达式 5 + 3 求值，也可能先对表达式
9 + 6 求值：`apples = (5 + 3) * (9 + 6);`。

C 把先计算哪部分的决定权留给编译器的设计者，以便针对特定系统优化设计。但是，对于逻辑运算符是个例外，C 保证逻辑表达式的求值顺序是从左往右。
&& 和 || 运算符都是序列点，所以程序在从一个运算对象执行到下一个运算对象之前，所有的副作用都会生效。而且，C 保证一时发现某个元素让整个表达式
无效，便立即停止求值。所以才能写出这样结构的代码：`while ((c = getchar()) != ' ' && c != '\n')`。再考虑以下例子：`while (x ++ < 10 && x + y < 20)`。
实际上，&& 是一个序列点，这保证了在对 && 右侧的表达式求值之前，已经递增了 x。

### 范围

&& 运算符可用于测试范围。例如，要测试 score 是否在 90～100 的范围内，可以这样写：

```
if (range >= 90 && range <= 100)
	printf("Good show!\n");
```

## 一个统计单词的程序

编写一个统计单词数量的程序。该程序还可以计算字符和行数。先编写伪代码：

```
读取一个字符
当有更多输入时
	递增字符计数
	如果读完一行，递增行数计数
	如果读完一个单词，递增单词计数
	读取下一个字符
```

[wordcnt.c](wordcnt.c)
