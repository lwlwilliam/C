### 数组和指针

> 数组

`数组`由数据类型相同的一系列元素组成。
需要使用数组时，通过声明数组告诉编译器数组中内含多少元素和这些元素的类型。
编译器根据这些信息正确地创建数组。

一些数组声明：

```
int main()
{
    float candy[365];  /* 内含 365 个 float 类型的元素的数组 */
    char code[12];     /* 内含 12 个 char 类型元素的数组 */
    int states[50];    /* 内含 50 个 int 类型元素的数组 */
}
```

方括号`[]`表明 candy、code 和 states 都是数组，方括号中的数字表明数组中的元素个数。

>> 初始化数组

```
int main()
{
    int power[8] = {1,2,4,6,8,16,32,64};  /* ANSI C 开始支持这种初始化 */
}
```

如上，用以逗号分隔的值列表（用花括号括起来）来初始化数组，各值之间用逗号分隔。在逗号和值之间可以使用空格。

假如初始化列表中的项数不一致，如下：

```
/* somedata.c -- 部分初始化数组 */
#include <stdio.h>
#define SIZE 4
int main()
{
    int somedata[SIZE] = {1492, 1066};
    int i;

    printf("%2s%14s\n", "i", "somedata[i]");

    for (i = 0; i < SIZE; i ++) {
        printf("%2d%14d\n", i, somedata[i]);
    }

    return 0;
}


// 结果如下：
/*
i   somedata[i]
0          1492
1          1066
2             0
3             0
*/
```

由此可见，当初始化列表中的值少于数组元素个数时，编译器会把剩余的元素都初始化为 0。
其实初始化时可以省略方括号中的数字。

>> 指定初始化器(C99)

C99 增加了一个新特性，`指定初始化器(designated initializer)`。利用该特性可以初始化指定的数组元素。
例如，只初始化数组中的最后一个元素。对于传统的 C 初始化语法，必须初始化最后一个元素之前的所有元素，才能初始化它：
`int arr[6] = {0, 0, 0, 0, 0, 212};  // 传统的语法`。
而 C99 规定，可以在初始化列表中使用带方括号的下标指明待初始化的元素：
`int arr[6] = {[5] = 212};  // 把 arr[5] 初始化为 212`。
对于未初始化的元素都会被设置为 0。

>> 给数组元素赋值

声明数组后，可以借助下标（或索引）给数组元素赋值。例如：

```
/* 给数组的元素赋值 */
#include <stdio.h>
#define SIZE 50
int main()
{
	int counter, evens[SIZE];

	for (counter = 0; counter < SIZE; counter ++) {
		evens[counter] = 2 * counter;	
	}

	return 0;
}
```

注意，这段代码中使用循环给数组的元素依次赋值。
C 不允许把数组作为一个单元赋给另一个数组，
除初始化以外也不允许使用花括号列表的形式赋值。
以下是一些错误的赋值形式：

```
/* 一些无效的数组赋值 */
#include <stdio.h>
#define SIZE 5
int main()
{
	int oxen[SIZE] = {5, 3, 2, 8};  // 初始化没问题
	int yaks[SIZE];

	yaks = oxen;  // 不允许
	yaks[SIZE] = oxen[SIZE];  // 数组下标越界
	yaks[SIZE] = {5, 3, 2, 8};  // 不起作用

	return 0;
}
```

>> 数组边界

在使用数组时，要防止数组下标起出边界。也就是说，必须确保下标是有效的值。
例如：`int doofi[20]`，在使用该数组时，要确保程序中使用的数组下标在 0 ~ 19 的范围内。
